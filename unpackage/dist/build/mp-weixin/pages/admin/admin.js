(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/admin/admin"],{"120b":function(n,e,t){"use strict";(function(n){t("6965");i(t("66fd"));var e=i(t("12ff"));function i(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,t("543d")["createPage"])},"12ff":function(n,e,t){"use strict";t.r(e);var i=t("e551"),u=t("2cd0");for(var o in u)"default"!==o&&function(n){t.d(e,n,(function(){return u[n]}))}(o);t("fc6f");var a,r=t("f0c5"),c=Object(r["a"])(u["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);e["default"]=c.exports},"2cd0":function(n,e,t){"use strict";t.r(e);var i=t("ee20"),u=t.n(i);for(var o in i)"default"!==o&&function(n){t.d(e,n,(function(){return i[n]}))}(o);e["default"]=u.a},e551:function(n,e,t){"use strict";t.d(e,"b",(function(){return u})),t.d(e,"c",(function(){return o})),t.d(e,"a",(function(){return i}));var i={uniPopup:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-popup/components/uni-popup/uni-popup")]).then(t.bind(null,"988c"))},uniSwipeAction:function(){return t.e("uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action").then(t.bind(null,"ca76"))},uniSwipeActionItem:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item")]).then(t.bind(null,"f28e"))}},u=function(){var n=this,e=n.$createElement,i=(n._self._c,n.__map(n.menuItems,(function(e,i){var u=n.__get_orig(e),o=t("2254")("./"+e.icon+".png");return{$orig:u,m0:o}})));n._isMounted||(n.e0=function(e){return n.$refs.popup.open()}),n.$mp.data=Object.assign({},{$root:{l0:i}})},o=[]},ee20:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(t("a34a")),u=t("f6f9"),o=t("64a2");function a(n){return n&&n.__esModule?n:{default:n}}function r(n,e,t,i,u,o,a){try{var r=n[o](a),c=r.value}catch(s){return void t(s)}r.done?e(c):Promise.resolve(c).then(i,u)}function c(n){return function(){var e=this,t=arguments;return new Promise((function(i,u){var o=n.apply(e,t);function a(n){r(o,i,u,a,c,"next",n)}function c(n){r(o,i,u,a,c,"throw",n)}a(void 0)}))}}var s={onShow:function(){n.hideHomeButton(),this.getGuides()},watch:{guides:{handler:function(n,e){(0,o.equalsObj)(n,e)||(this.id="",this.status="")},deep:!0},name:function(){this.getGuides()}},data:function(){return{guides:[],triggered:!1,status:"",id:"",name:"",query:"",menuItems:[{name:"添加导游",icon:"icon_quanbugerenzhongxin@2x",url:"/pages/edit/edit"},{name:"一键散团",icon:"icon_quanbuzutuan@2x",handle:this.clearTeam},{name:"退出",icon:"icon_quanbuguanbiweilan@2x",handle:this.logout}],options:[{text:"编辑",style:{backgroundColor:"#dd524d"}}]}},methods:{getGuides:function(){var e=this;return c(i.default.mark((function t(){var o;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.showLoading({mask:!0,title:"加载中"}),t.prev=1,t.next=4,(0,u.queryGuide)({name:e.name});case 4:o=t.sent,e.guides=o.value,e.status=e.guides.some((function(n){return e.id===n.id&&0===n.haveTeam}));case 7:return t.prev=7,n.stopPullDownRefresh(),n.hideLoading(),t.finish(7);case 11:case"end":return t.stop()}}),t,null,[[1,,7,11]])})))()},click:function(e){e.url?n.navigateTo({url:e.url}):e.handle()},logout:function(){n.showModal({content:"是否退出管理员账号",success:function(e){e.confirm&&(n.clearStorage(),getApp().globalData={},n.reLaunch({url:"/pages/login/login"}))}})},radioChange:function(n){var e=this,t=n.detail.value;this.id=parseInt(t),this.status=this.guides.some((function(n){return e.id===n.id&&0===n.haveTeam}))},skip:function(){var e=this;!1===this.status?n.getLocation({type:"gcj02",success:function(){var t=c(i.default.mark((function t(o){var a,r,c,s;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=o.latitude,r=o.longitude,getApp().globalData.longitude=r,getApp().globalData.latitude=a,n.showLoading({mask:!0}),t.prev=3,t.next=6,(0,u.querySceneryNum)({lat:getApp().globalData.latitude,lon:getApp().globalData.longitude});case 6:c=t.sent,s=c.value,s?(getApp().globalData.sceneryNo=s.no,n.navigateTo({url:"/pages/group/group?id=".concat(e.id)})):n.showModal({content:"您不在任何景区"});case 9:return t.prev=9,n.hideLoading(),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[3,,9,12]])})));function o(n){return t.apply(this,arguments)}return o}()}):!0===this.status?n.navigateTo({url:"/pages/myGroup/myGroup?id=".concat(this.id)}):n.showToast({title:"请选择导游",icon:"none"})},clearTeam:function(){var e=this;n.showModal({content:"是否解散所有团",success:function(){var t=c(i.default.mark((function t(o){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!o.confirm){t.next=16;break}return n.showLoading({title:"解散中",mask:!0}),t.prev=2,t.next=5,(0,u.clearTeam)();case 5:e.$refs.popup.close(),n.showModal({content:"解散成功",showCancel:!1}),e.getGuides(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](2),n.showModal({content:t.t0.toString(),showCancel:!1});case 13:return t.prev=13,n.hideLoading(),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[2,10,13,16]])})));function o(n){return t.apply(this,arguments)}return o}()})},edit:function(e){n.navigateTo({url:"/pages/edit/edit?name=".concat(e.realName,"&phone=").concat(e.customerPhone,"&id=").concat(e.id)})}},onPullDownRefresh:function(){this.getGuides()}};e.default=s}).call(this,t("543d")["default"])},f6b0:function(n,e,t){},fc6f:function(n,e,t){"use strict";var i=t("f6b0"),u=t.n(i);u.a}},[["120b","common/runtime","common/vendor"]]]);